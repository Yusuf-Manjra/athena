# **********************************************************************
# $Id: cosmics_run.config 655068 2015-03-18 15:04:20Z falonso $
# **********************************************************************

#######################
# HLTmet
#######################

#######################
# Output
#######################

output top_level {
  output HLT {
    output TRMET {
      output Shifter {
        output L1 {
        }
        output HLT {
        }
      }
      output Expert {
        output L1 {
          output XE70 {
          }         
        }
        output HLT {
          output xe80 {
          }
          output xe80_mht {
          }
          output xe80_pueta {
          }
          output xe80_pufit {
          }
          output xe80_tc_em {
          }
          output xe80_tc_lcw {
          }
        }
      }       
    }
  }
}

#######################
# Histogram Assessments
#######################

dir HLT {
  algorithm = HLTmet_Histogram_Not_Empty&GatherData
  dir METMon {
    dir Shifter {

      dir L1 {
        output = HLT/TRMET/Shifter/L1
        hist L1_MET {
        }
        hist L1_MET_log {
        }
        hist L1_MET_phi {
        }
        hist L1_MET_phi1 {
        }
        hist L1_METx {
        }
        hist L1_METy {
        }
        hist L1_SumEt {
        }
        hist L1_SumEt_log {
        }
      }

      dir HLT {
        output = HLT/TRMET/Shifter/HLT
        hist HLT_MET {    
          display = <AxisRange(0,500,"X")>,LogY
        }
        hist HLT_MET_log {    
          display = <AxisRange(0,500,"X")>,LogY
        }
        hist HLT_MEx {
          display = LogY
        }
        hist HLT_MEy {
          display = LogY
        }
        #hist HLT_MET {
        #  display = <AxisRange(0,10,"X")>,LogY
        #}
        hist HLT_SumE {
          display = <AxisRange(0,1000,"X")>,LogY
        }
        hist HLT_SumEt {
          display = <AxisRange(0,1000,"X")>,LogY
        }
        hist HLT_SumEt_log {
          display = <AxisRange(0,1000,"X")>,LogY
        }
        hist HLT_MET_phi {
          display = LogY
        }
        hist HLT_MET_phi1 {
          display = LogY
        }
        hist HLT_MET_etaphi1 {
          display = LogZ
        }
      } ## end HLT

    } ## end Shifter

    dir Expert {
      dir L1 {
         dir XE70 {
           output = HLT/TRMET/Expert/L1/XE70
           hist L1_METx_log {
           }
           hist L1_METy_log {
           }
           hist L1_MET {
           }
           hist L1_METx_log {
           }
         }
      }

      dir HLT {
        dir xe80 {
          output = HLT/TRMET/Expert/HLT/xe80

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80
        dir xe80_mht {
          output = HLT/TRMET/Expert/HLT/xe80_mht

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80_mht
        dir xe80_pueta {
          output = HLT/TRMET/Expert/HLT/xe80_pueta

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80_pueta
        dir xe80_pufit {
          output = HLT/TRMET/Expert/HLT/xe80_pufit

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80_pufit
        dir xe80_tc_em {
          output = HLT/TRMET/Expert/HLT/xe80_tc_em

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80_tc_em
        dir xe80_tc_lcw {
          output = HLT/TRMET/Expert/HLT/xe80_tc_lcw

          hist HLT_MEx {
          }    
          hist HLT_MEy {
          }    
          hist HLT_MET {
          }    
          hist HLT_MET_lin1 {
          }    
          hist HLT_SumEt {
          }    
          hist HLT_MET_phi {
          }    
          hist HLT_MET_phi1 {
          }    
          hist HLT_MEx_log {
          }    
          hist HLT_MEy_log {
          }    
          hist HLT_SumEt_log {
          }    
          hist HLT_MEz {
          }    
          hist HLT_SumE {
          }    
          hist HLT_MEz_log {
          }    
          hist HLT_SumE_log {
          }    
          hist HLT_MET_status {
          }    
        } ## end xe80_tc_lxw

      } ## end HLT
    } ## end Expert
  } ## end METMon
} ## end HLT


##############
# Algorithms
##############

## HLTmetAlgorithm 1
compositeAlgorithm HLTmet_Histogram_Not_Empty&GatherData {
  subalgs = GatherData,Histogram_Not_Empty
  libnames = libdqm_algorithms.so
}
algorithm HLTmet_Histogram_Not_Empty&GatherData {
  name = HLTmet_Histogram_Not_Empty&GatherData
  #reference = CentrallyManagedReferencess
  #reference = CentrallyManagedReferences
}

## HLTmetAlgorithm 2
algorithm HLTmet_AlgErrorBits {
  libname = libdqm_algorithms.so
  name = AlgHLTMETStatus
  METYellowMin = 17
  METYellowMax = 29
  METRedMin = 32
  METRedMax = 32
  DoYellowFlag = 0
  DoRedFlag = 1
  thresholds = AlgErrorBitsThresholds
}


## HLTmetAlgorithm 3
algorithm HLTmet_AlgComponents {
  libname = libdqm_algorithms.so
  name = AlgHLTMETComponents
  METYellowMin = 1
  METYellowMax = 25
  METRedMin = 25
  METRedMax = 25
  DoYellowFlag = 1
  DoRedFlag = 0
}

## HLTmetAlgorithm 4 (not used)
compositeAlgorithm HLTmet_HistogramNotEmpty_YellowEmpty&GatherData {
  subalgs = Bins_LessThan_Threshold,GatherData
  libnames = libdqm_algorithms.so
}

algorithm HLTmet_HistogramNotEmpty_YellowEmpty&GatherData {
  name = HLTmet_HistogramNotEmpty_YellowEmpty&GatherData
  BinThreshold = 0
  thresholds = HLTmet_HistogramNotEmpty_YellowEmpty_Threshold
}

# HLTmetAlgorithm 5 (not used)
algorithm HLTmet_Bins_LessThan_Threshold {
  libname = libdqm_algorithms.so
  name = Bins_LessThan_Threshold
  thresholds = HLTmet_NbinsThreshold
  BinThreshold = 0.5
  MinStat = 1
}

####################
# Summary Algorithms
####################
## HLTmetSummaryAlg 1
algorithm HLTmetSimpleSummary {
  libname = libdqm_summaries.so
  name = SimpleSummary
}

## HLTmetSummaryAlg 2
algorithm HLTmetWorstCaseSummary {
    libname = libdqm_summaries.so
      name = WorstCaseSummary
}

## HLTmetSummaryAlg 3
algorithm HLTmetPercentSummary {
    libname = libdqm_summaries.so
      name = PercentSummary
}

###############
# Thresholds
###############

thresholds AlgErrorBitsThresholds {
  limits Threshold {
    warning = 0.1
    error = 0.1
  }
}

## HLTmetAlgorithm 4 thresholds: (not used)
thresholds HLTmet_HistogramNotEmpty_YellowEmpty_Threshold {
  limits NBins {
    error = -0.5
    warning = 0.5
  }
}

## HLTmetAlgorithm 5 thresholds: (not used)
thresholds HLTmet_NbinsThreshold {
  limits NBins {
    warning = 7320
    error = 7625
  }
}

