# **********************************************************************
# $Id: cosmics_run.config 526869 2012-11-20 19:31:39Z vogel $
# **********************************************************************

###########################################################
# MDT
###########################################################

#############
# Output
#############

output top_level {
  algorithm = WorstCaseSummary  

  output MuonDetectors {

    output MDT {
      output Shifter {
    	output Global {
    	}
    	output MDTBA {
        }
    	output MDTBC {
        }
    	output MDTEA {
        }
    	output MDTEC {
        }
      }
      output Expert {
    	output RecoMonitoring {
    	}
    	output Noise_Bkgrd_Rates {
        }
    	output RawHitsPerChamber {
        }
    	output MDTBA {
        }
    	output MDTBC {
        }
    	output MDTEA {
        }
    	output MDTEC {
        }
      }
    }

  }
  
}

#######################
# Histogram Assessments
#######################

dir Muon {
   
  dir MuonRawDataMonitoring {
    dir MDT {
      algorithm = MDT_Histogram_Not_Empty
      dir Overview {
       	hist NormedHitsInBarrelPerChamber_ADCCut_NoiseCut {
	  output = MuonDetectors/MDT/Expert
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	  algorithm = MDTBarrelNormed_BinsGreaterThanThreshold_Null
	  display = LogZ	  
 	}
 	hist NormedHitsInEndCapPerChamber_ADCCut_NoiseCut {
	  output = MuonDetectors/MDT/Expert
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	  algorithm = MDTEndCapNormed_BinsGreaterThanThreshold_Null
	  display = LogZ
 	}
       	hist NumberOfHitsInBarrelPerChamber_ADCCut {
	  output = MuonDetectors/MDT/Expert/RawHitsPerChamber
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	  algorithm = MDTBarrelNormed_BinsGreaterThanThreshold_Null
	  display = LogZ	  
 	}
 	hist NumberOfHitsInEndCapPerChamber_ADCCut {
	  output = MuonDetectors/MDT/Expert/RawHitsPerChamber
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	  algorithm = MDTEndCapNormed_BinsGreaterThanThreshold_Null
	  display = LogZ
 	}
	dir Expert {
	  output = MuonDetectors/MDT/Expert
          ### BELOW TO BE REMOVED WHEN POST_PROC CHANGES MAKE IT TO TIER0 ###
	  hist AverageNoisePerTubeBarrel {
	    algorithm = MDT_GatherData
	    display = LogZ
	  }
	  hist AverageNoisePerTubeEndcap {
	    algorithm = MDT_GatherData
	    display = LogZ
	  }
	  hist AverageBkgrdPerTubeBarrel {
	    algorithm = MDT_GatherData
	    display = LogZ
	  }
	  hist AverageBkgrdPerTubeEndcap {
	    algorithm = MDT_GatherData
	    display = LogZ
	  }	    
          hist BA_bkgrd {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist BA_noise {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist BC_bkgrd {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist BC_noise {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist EA_bkgrd {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist EA_noise {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist EC_bkgrd {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist EC_noise {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist bkgrd_summary {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist noise_summary {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
            algorithm = MDT_BinDump
          }
          hist TubeRate {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#TubeRate
            algorithm = MDT_GatherData
            display = LogY,StatBox
          }
          hist EffVSNoise {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
            algorithm = MDT_GatherData
            display = StatBox
          }
          hist EffVSNoise_ADCCut {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
            algorithm = MDT_GatherData
            display = StatBox
          }
          hist EffVSBkd {
            description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
            algorithm = MDT_GatherData
            display = StatBox
          }
          ### ABOVE TO BE REMOVED WHEN POST_PROC CHANGES MAKE IT TO TIER0 ###
 	  hist number_of_Chambers_with_hits_per_event {
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
 	  }   
 	  hist number_of_Chambers_with_hits_per_event_ADCCut {
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
 	  }   
 	  hist TotalNumber_of_MDT_hits_per_event_big {
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogY,StatBox
 	  }
 	  hist TotalNumber_of_MDT_hits_per_event_big_ADCCut {
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogY,StatBox
 	  }
       	  hist VolumeMapBarrel {
	    display = LogZ
 	  }
 	  hist VolumeMapEndcap {
	    display = LogZ
 	  }
#      	  hist HitsPerEventInBarrelPerChamber_ADCCut {
#	    algorithm = MDTBarrelNormed_BinsGreaterThanThreshold_Null
#	    display = LogZ
# 	  }
# 	  hist HitsPerEventInEndCapPerChamber_ADCCut {
#	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MDTDeadElements
#	    algorithm = MDTEndCapNormed_BinsGreaterThanThreshold_Null
#	    display = LogZ
# 	  }
	  hist MDTNoisyElements {
	    algorithm = MDT_BinDump
	  }
	  hist MDTDeadElements {
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MDTDeadElements
	    algorithm = MDT_BinDump
	    display = LogY
	  }
	  dir Noise_Bkgrd_Rate {
	    output = MuonDetectors/MDT/Expert/Noise_Bkgrd_Rates
	    hist AverageNoisePerTubeBarrel {
	      algorithm = MDT_GatherData
	      display = LogZ
	    }
	    hist AverageNoisePerTubeEndcap {
	      algorithm = MDT_GatherData
	      display = LogZ
	    }
	    hist AverageBkgrdPerTubeBarrel {
	      algorithm = MDT_GatherData
	      display = LogZ
	    }
	    hist AverageBkgrdPerTubeEndcap {
	      algorithm = MDT_GatherData
	      display = LogZ
	    }	    
            hist BA_bkgrd {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist BA_noise {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist BC_bkgrd {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist BC_noise {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist EA_bkgrd {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist EA_noise {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist EC_bkgrd {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist EC_noise {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist bkgrd_summary {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist noise_summary {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BackGroundRate
              algorithm = MDT_BinDump
            }
            hist TubeRate {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#TubeRate
              algorithm = MDT_GatherData
              display = LogY,StatBox
            }
            hist EffVSNoise {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
              algorithm = MDT_GatherData
              display = StatBox
            }
            hist EffVSNoise_ADCCut {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
              algorithm = MDT_GatherData
              display = StatBox
            }
            hist EffVSBkd {
              description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#EffVSNoise
              algorithm = MDT_GatherData
              display = StatBox
            }
          }
	  dir RecoMonitoring {
	    output = MuonDetectors/MDT/Expert/RecoMonitoring
 	    hist effsInBarrelPerChamber_ADCCut {
	      algorithm = MDT_GatherData	
	      display = <AxisRange(0,1,"Z")>
 	    }
 	    hist effsInEndCapPerChamber_ADCCut {
	      algorithm = MDT_GatherData
	      display = <AxisRange(0,1,"Z")>
 	    }
   	    hist HitsPerEventInBarrelPerChamber_onSegm_ADCCut {
	      algorithm = MDTBarrelNormedSegm_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }
 	    hist HitsPerEventInEndCapPerChamber_onSegm_ADCCut {
	      algorithm = MDTEndCapNormedSegm_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }	    
          }
	  dir RawHitsPerChamber {
	    output = MuonDetectors/MDT/Expert/RawHitsPerChamber
   	    hist HitsPerEvtInBarrelPerChamber_ADCCut {
	      algorithm = MDTBarrelNormed_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }
 	    hist HitsPerEvtInEndCapPerChamber_ADCCut {
	      algorithm = MDTEndCapNormed_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }	    
   	    hist HitsPerEvtInBarrelPerChamber_ADCCut_NoiseCut {
	      algorithm = MDTBarrelNormed_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }
 	    hist HitsPerEvtInEndCapPerChamber_ADCCut_NoiseCut {
	      algorithm = MDTEndCapNormed_BinsGreaterThanThreshold_Null
	      description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	      display = LogZ
 	    }	    
          } 
	}
 	output = MuonDetectors/MDT/Shifter/Global	
 	hist TotalNumber_of_MDT_hits_per_event {
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = LogY,StatBox
 	}
 	hist TotalNumber_of_MDT_hits_per_event_ADCCut {
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = LogY,StatBox
 	}
 	hist Overall_TDC_ADCCut_spectrum {
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = StatBox
 	}
 	hist Overall_ADC_spectrum {
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = LogY,StatBox
 	}
 	hist Overall_ADC_onSegm_spectrum {
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = LogY,StatBox
 	}
 	hist Overall_TDC_onSegm_ADCCut_spectrum {
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	  algorithm = MDT_AlgMDTTDCOfflineSpectrum
	  display = StatBox
 	}
 	hist Overall_TDCADC_spectrum {
	  algorithm = MDT_Histogram_Not_Empty&GatherData
	  display = LogZ,<AxisRange(50,300,"Y")>,StatBox
 	}
# 	hist NumberOfHitsInBarrelPerChamber_ADCCut {
#          description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
#	  algorithm = MDTBarrel_BinsGreaterThanThreshold
#	  display = LogZ
# 	}
# 	hist NumberOfHitsInEndCapPerChamber_ADCCut {
#	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
#	  algorithm = MDTEndCap_BinsGreaterThanThreshold
#	  display = LogZ
# 	}
	dir Expert {
          hist NormedHitsInBarrelPerChamber_ADCCut {
 	  output = MuonDetectors/MDT/Shifter/Global	
          description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
      	  algorithm = MDTBarrelNormed_BinsGreaterThanThreshold
  	  display = LogZ
   	  }
   	  hist NormedHitsInEndCapPerChamber_ADCCut {
 	  output = MuonDetectors/MDT/Shifter/Global	
	  description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
          algorithm = MDTEndCapNormed_BinsGreaterThanThreshold
	  display = LogZ
 	  }
	}
      }
      dir MDTBA {	
	dir Overview {	
	  hist MDTTDC_segm_Summary_ADCCut_BA {
	    output = MuonDetectors/MDT/Shifter/MDTBA	
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_AlgMDTTDCOfflineSpectrum
	    display = StatBox
	  }
	  hist MDT_tdrift_BA {
	    output = MuonDetectors/MDT/Shifter/MDTBA	
	    algorithm = MDT_GatherData	
	  }	
	  hist MDT_t0_BA {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    algorithm = MDT_GatherData
	  }
	  hist effsInBAInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInBAMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInBAOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }	      
   	  hist OccupancyVsLB_BAInner {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_BAMiddle {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_BAOuterPlusExtra {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }
	  hist NumberOfHitsInBAExtraPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAExtra_BinsGreaterThanThreshold
	    display = LogZ
          }
	  hist NumberOfHitsInBAInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAIn_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInBAMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAMid_BinsGreaterThanThreshold
            display = LogZ
	  }
	  hist NumberOfHitsInBAOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAOut_BinsGreaterThanThreshold
	    display = LogZ
	  }	      
	  hist MDTTDC_Summary_ADCCut_BA {
	    output = MuonDetectors/MDT/Expert/MDTBA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
	  }
	  hist mdtBA_ML_eff {
	    output = MuonDetectors/MDT/Expert/MDTBA
	    algorithm = MDT_GatherData
	  }
	  hist mdtBA_Occupancy {
	    output = MuonDetectors/MDT/Expert/MDTBA
	    description =  https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinContentDump
            algorithm = MDT_BinDump2
            display = <AxisRange(0,1,"Y")>
	  }
 	  hist Overall_TDCADC_spectrum_BA {
	    output = MuonDetectors/MDT/Expert/MDTBA
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogZ,<AxisRange(50,300,"Y")>
	    display = StatBox
 	  }
#	  hist mdtBA_TUBE_eff {
#	    output = MuonDetectors/MDT/Expert/MDTBA
#	    algorithm = MDT_GatherData
#	  }
	}
      }	
      dir MDTBC {	
	dir Overview {		
	  hist MDTTDC_segm_Summary_ADCCut_BC {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_AlgMDTTDCOfflineSpectrum
	    display = StatBox
	  }
	  hist MDT_tdrift_BC {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    algorithm = MDT_GatherData
	  }	
	  hist MDT_t0_BC {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    algorithm = MDT_GatherData
	  }
	  hist effsInBCInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInBCMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInBCOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }	      
   	  hist OccupancyVsLB_BCInner {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_BCMiddle {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_BCOuterPlusExtra {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }
	  hist NumberOfHitsInBCExtraPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAExtra_BinsGreaterThanThreshold
	    display = LogZ
          }
	  hist NumberOfHitsInBCInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAIn_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInBCMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBAMid_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInBCOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTBCOut_BinsGreaterThanThreshold
 	    display = LogZ
	  }	      
#	  hist mdtBC_TUBE_eff {
#	    output = MuonDetectors/MDT/Expert/MDTBC
#	    algorithm = MDT_GatherData
#	  }
	  hist mdtBC_ML_eff {
	    output = MuonDetectors/MDT/Expert/MDTBC	
	    algorithm = MDT_GatherData
	  }
	  hist mdtBC_Occupancy {
	    output = MuonDetectors/MDT/Expert/MDTBC
            description =  https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinContentDump
	    algorithm = MDT_BinDump2
            display = <AxisRange(0,1,"Y")>
	  }
	  hist MDTTDC_Summary_ADCCut_BC {
	    output = MuonDetectors/MDT/Expert/MDTBC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
	  }
	  hist Overall_TDCADC_spectrum_BC {
	    output = MuonDetectors/MDT/Expert/MDTBC
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogZ,<AxisRange(50,300,"Y")>, StatBox
 	  }
	}	
      }
      dir MDTEA {	
	dir Overview {		
	  hist MDTTDC_segm_Summary_ADCCut_EA {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_AlgMDTTDCOfflineSpectrum
	    display = StatBox
	  }
	  hist MDT_tdrift_EA {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    algorithm = MDT_GatherData
	  }	
	  hist MDT_t0_EA {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    algorithm = MDT_GatherData
	  }
	  hist effsInEAInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInEAMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInEAOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }	      
   	  hist OccupancyVsLB_EAInner {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_EAMiddle {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_EAOuterPlusExtra {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }
	  hist NumberOfHitsInEAExtraPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTEAExtra_BinsGreaterThanThreshold
	    display = LogZ
          }
	  hist NumberOfHitsInEAInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTEAIn_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInEAMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTEAMid_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInEAOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTEAOut_BinsGreaterThanThreshold
	    display = LogZ
	  }	     	
	  hist mdtEA_Occupancy {
	    output = MuonDetectors/MDT/Expert/MDTEA	
	    description =  https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinContentDump
            algorithm = MDT_BinDump2
            display = <AxisRange(0,1,"Y")>
	  }
	  hist MDTTDC_Summary_ADCCut_EA {
	    output = MuonDetectors/MDT/Expert/MDTEA
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
	  } 
#	  hist mdtEA_TUBE_eff {
#	    output = MuonDetectors/MDT/Expert/MDTEA
#	    algorithm = MDT_GatherData
#	  }
	  hist mdtEA_ML_eff {
	    output = MuonDetectors/MDT/Expert/MDTEA
	    algorithm = MDT_GatherData
	  }
 	  hist Overall_TDCADC_spectrum_EA {
	    output = MuonDetectors/MDT/Expert/MDTEA
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogZ,<AxisRange(50,300,"Y")>, StatBox
 	  }
	}
      }	
      dir MDTEC {
	dir Overview {			
	  hist MDTTDC_segm_Summary_ADCCut_EC {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_AlgMDTTDCOfflineSpectrum
	    display = StatBox
	  }
	  hist MDT_tdrift_EC {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    algorithm = MDT_GatherData
	  }	
	  hist MDT_t0_EC {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    algorithm = MDT_GatherData
	  }
	  hist effsInECInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInECMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }
	  hist effsInECOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#MultiLayerEfficiency
	    algorithm = MDT_GatherData
            display = <AxisRange(0,1,"Z")>
	  }	      
   	  hist OccupancyVsLB_ECInner {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_ECMiddle {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }	      
   	  hist OccupancyVsLB_ECOuterPlusExtra {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    algorithm = MDT_OccupancyHoleFinder_imp
	    display = LogZ
	  }
	  hist NumberOfHitsInECExtraPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
	    algorithm = MDTEAExtra_BinsGreaterThanThreshold
	    display = LogZ
          }
	  hist NumberOfHitsInECInnerPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
            algorithm = MDTEAIn_BinsGreaterThanThreshold
            display = LogZ
	  }
	  hist NumberOfHitsInECMiddlePerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
            algorithm = MDTEAMid_BinsGreaterThanThreshold
	    display = LogZ
	  }
	  hist NumberOfHitsInECOuterPerMultiLayer_ADCCut {
	    output = MuonDetectors/MDT/Shifter/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinsGretaerThanNonZeroMedian
            algorithm = MDTEAOut_BinsGreaterThanThreshold
	    display = LogZ
	  }	      
	  hist mdtEC_Occupancy {
	    output = MuonDetectors/MDT/Expert/MDTEC	
	    description =  https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#BinContentDump
	    algorithm = MDT_BinDump2
            display = <AxisRange(0,1,"Y")>
	  }
	  hist MDTTDC_Summary_ADCCut_EC {
	    output = MuonDetectors/MDT/Expert/MDTEC
	    description = https://twiki.cern.ch/twiki/bin/view/Atlas/MDTOfflineMonitoringPlots#AlgMDTTDCOfflineSpectrum
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = StatBox
	  }
	  hist Overall_TDCADC_spectrum_EC {
	    output = MuonDetectors/MDT/Expert/MDTEC
	    algorithm = MDT_Histogram_Not_Empty&GatherData
	    display = LogZ,<AxisRange(50,300,"Y")>, StatBox
 	  }
#	  hist mdtEC_TUBE_eff {
#	    output = MuonDetectors/MDT/Expert/MDTEC
#	    algorithm = MDT_GatherData
#	  }
	  hist mdtEC_ML_eff {
	    output = MuonDetectors/MDT/Expert/MDTEC
	    algorithm = MDT_GatherData
	  }
	}
      }	
    }
                        
  } ## closing MuonRawDataMonitoring  

}

#############
# Algorithms
#############
# Note on Algs
# For Bin_GreaterThanNonZeroMedian
# A side are the same as C side save for BAOut vs BCOut
#############

compositeAlgorithm MDT_Histogram_Not_Empty&GatherData {
  subalgs = GatherData,Histogram_Not_Empty
  libnames = libdqm_algorithms.so
}
algorithm MDT_Histogram_Not_Empty&GatherData {
  name = MDT_Histogram_Not_Empty&GatherData
}
algorithm Muon_All_Bins_Filled {
  libname = libdqm_algorithms.so
  name = All_Bins_Filled
}
algorithm MDT_Histogram_Not_Empty {
  libname = libdqm_algorithms.so
  name = Histogram_Not_Empty
}
algorithm MDT_GatherData {
  libname = libdqm_algorithms.so
  name = GatherData
}

algorithm MDT_OccupancyHoleFinder_imp {
  libname = libdqm_algorithms.so
  name = MDT_OccupancyHoleFinder
  MinMedian = 50
  MedianThreshold = 0.1
  thresholds = OccupancyHoleFinder_thresh
}

algorithm MDT_BinDump {
  libname = libdqm_algorithms.so
  name = BinContentDump
}
algorithm MDT_BinDump2 {
  libname = libdqm_algorithms.so
  name = BinContentDump
  %_Tubes_On = 0.9
}

algorithm MDT_AlgMDTTDCOfflineSpectrum { 
  libname = libdqm_algorithms.so
  name = AlgMDTTDCOfflineSpectrum
  t0Warning = 350
  t0Error = 250
  tMaxWarning = 1600
  tMaxError = 1800 
}
algorithm MDTBarrel_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.02
  MinBinThreshold = 1
  TotalBins = 656		
  thresholds = MDTBarrel_thresholds
}
algorithm MDTEndCap_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.02
  MinBinThreshold = 1
  TotalBins = 462
  thresholds = MDTEndCap_thresholds
}
algorithm MDTBarrel_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.02
  MinBinThreshold = 1
  TotalBins = 656		
  thresholds = MDTBarrel_thresholds_null
}
algorithm MDTEndCap_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.02
  MinBinThreshold = 1
  TotalBins = 462
  thresholds = MDTEndCap_thresholds_null
}
algorithm MDTBarrelNormedSegm_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.000001
  TotalBins = 656		
  thresholds = MDTBarrel_thresholds_null
}
algorithm MDTEndCapNormedSegm_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.000001
  TotalBins = 462
  thresholds = MDTEndCap_thresholds_null
}
algorithm MDTBarrelNormed_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.001
  TotalBins = 656		
  thresholds = MDTBarrel_thresholds_null
}
algorithm MDTEndCapNormed_BinsGreaterThanThreshold_Null {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.001
  TotalBins = 462
  thresholds = MDTEndCap_thresholds_null
}
algorithm MDTBarrelNormed_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.001
  TotalBins = 656		
  thresholds = MDTBarrel_thresholds
}
algorithm MDTEndCapNormed_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.1
  MinBinThreshold = 0.001
  TotalBins = 462
  thresholds = MDTEndCap_thresholds
}
algorithm MDTBAExtra_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 16
  thresholds = MDTBAExt_thresholds
}
algorithm MDTBAIn_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.03
  MinBinThreshold = 1
  TotalBins = 236
  thresholds = MDTBAIn_thresholds
}
algorithm MDTBAMid_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 178
  thresholds = MDTBAMid_thresholds
}
algorithm MDTBAOut_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1	
  TotalBins = 204
  thresholds = MDTBAOut_thresholds
}
algorithm MDTBCOut_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 200
  thresholds = MDTBCOut_thresholds
}
algorithm MDTEAExtra_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 10
  thresholds = MDTEAExt_thresholds
}
algorithm MDTEAIn_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 100
  thresholds = MDTEAIn_thresholds
}
algorithm MDTEAMid_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 160
  thresholds = MDTEAMid_thresholds
}
algorithm MDTEAOut_BinsGreaterThanThreshold {
  libname = libdqm_algorithms.so
  name = Bins_GreaterThanNonZeroMedian_Threshold
  BinThreshold = 0.10
  MinBinThreshold = 1
  TotalBins = 192
  thresholds = MDTEAOut_thresholds
}

#############
# Thresholds
#############

thresholds OccupancyHoleFinder_thresh {
  limits NBins {
    #total 656/986
    warning = 90.001
    error = 90
  }
}

thresholds MDTBarrel_thresholds {
  limits NBins {
    #total 656/986
    warning = 590.0001
    error = 590
  }
}
thresholds MDTEndCap_thresholds {
  limits NBins {
#    #total 452/768
    #total w/ 10 extra chambers 462/768
    warning = 416.0001 
    error = 416
  }
}
thresholds MDTBarrel_thresholds_null {
  limits NBins {
    #total 656/986
    warning = 0.0001
    error = 0
  }
}
thresholds MDTEndCap_thresholds_null {
  limits NBins {
#    #total 452/768
    #total w/ 10 extra chambers 462/768
    warning = 0.0001
    error = 0
  }
}
thresholds MDTBAExt_thresholds {
  limits NBins {
    #total 16/64
    warning = 12
    error = 0
  }
}
thresholds MDTBAIn_thresholds {
  limits NBins {
    #total 236/256
    warning = 212
    error = 0
  }
}
thresholds MDTBAMid_thresholds {
  limits NBins {
    #total 178/256
    warning = 160
    error = 0
  }
}
thresholds MDTBAOut_thresholds {
  limits NBins {
    #total 204/288
    warning = 184
    error = 0
  }
}
thresholds MDTBCOut_thresholds {
  limits NBins {
    #total 200/256
    warning = 180
    error = 0
  }
}
thresholds MDTEAExt_thresholds {
  limits NBins {
    #total 10/256
    warning = 8
    error = 0
  }
}
thresholds MDTEAIn_thresholds {
  limits NBins {
    #total 100/192
    warning = 90
    error = 0
  }
}
thresholds MDTEAMid_thresholds {
  limits NBins {
    #total 160/192
    warning = 144
    error = 0
  }
}
thresholds MDTEAOut_thresholds {
  limits NBins {
    #total 192/192
    warning = 173
    error = 0
  }
}
