<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<unifiedTestConfiguration>
  <atn>
  </atn>
  <kv>
  </kv>

  <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">

    <rttContactPerson>Antonio Limosani (antonio.limosani@sydney.edu.au)</rttContactPerson>
    <refRelease>15.5.0</refRelease>

    <jobList>

      <classification>
        <displayClass>OfflineValidation</displayClass>
        <displayProcess>Reco</displayProcess>
        <displayComponent>Det-Combined</displayComponent>
      </classification>

      <jobTransform userJobId="mc14_14TeV_quick_perf">
	<doc>Reco_tf runs on 8TeV collision mc</doc>
	<jobTransformJobName>RecoTf_14TeV_mc_quick_perf</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.117050.PowhegPythia_P2011C_ttbar.recon.RDO.e2658_s1967_s1964_r5787_tid01572821_00/RDO.01572821._000019.pool.root.1,root://eosatlas//eos/atlas/user/a/atlaspmb/mc/valid1.117050.PowhegPythia_P2011C_ttbar.recon.RDO.e2658_s1967_s1964_r5787_tid01572821_00/RDO.01572821._000127.pool.root.1 --maxEvents 100 --outputESDFile myESD.pool.root --preExec='rec.doTrigger=False;from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>atlasrttperf</queue>
      </jobTransform>


    </jobList>
    
    <jobGroups>

      <jobGroup name="TrfRecPerf" parent="Transform">
	<!-- keep everything which is not huge -->
        <keepFilePattern>*.pmon.gz</keepFilePattern>
        <keepFilePattern>*.log</keepFilePattern>
        <keepFilePattern>*.xml</keepFilePattern>
        <keepFilePattern>*.py</keepFilePattern>
        <keepFilePattern>*.pdf</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.png</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.ascii</keepFilePattern>
        <keepFilePattern>last*</keepFilePattern>
        <keepFilePattern>*pickle</keepFilePattern>
        <keepFilePattern>jobReport*</keepFilePattern>
        <keepFilePattern>runargs*</keepFilePattern>
        <keepFilePattern>ntuple*perfmon*</keepFilePattern>
        <keepFilePattern>pmb-callgrind*log</keepFilePattern>
        <keepFilePattern>callgrind*bz2</keepFilePattern>
	<keepFilePattern>log.RAWtoESD</keepFilePattern>
      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_PerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
        </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_NoPerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
          </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_CheckFile_PerfMon" parent="TrfRecPerf">
	<keepFilePattern>*.root</keepFilePattern>
	<keepFilePattern>*.pmon.gz</keepFilePattern>
	<keepFilePattern>*.log</keepFilePattern>
        <!--test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple*perfmon.gz</argvalue>
          </arg>
        </test-->

      </jobGroup>

    </jobGroups>

  </rtt>
</unifiedTestConfiguration>
