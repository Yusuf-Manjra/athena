<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<unifiedTestConfiguration>
  <atn>
  </atn>
  <kv>
  </kv>

  <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">

    <rttContactPerson>Antonio Limosani (antonio.limosani@sydney.edu.au)</rttContactPerson>
    <refRelease>15.5.0</refRelease>

    <jobList>

      <classification>
        <displayClass>OfflineValidation</displayClass>
        <displayProcess>Reco</displayProcess>
        <displayComponent>Det-Combined</displayComponent>
      </classification>


      <jobTransform userJobId="data12_8TeV_long_tcmalloc">
	<doc>Reco_tf runs on 8TeV collision data</doc>
	<jobTransformJobName>RecoTrf_8TeV_data_long_tcmalloc</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputBSFile=/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents=500 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputHISTFile=myHist.root --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>short</queue>
      </jobTransform>
      
      
      <jobTransform userJobId="data12_8TeV_long_stdcmalloc">
	<doc>Reco_tf runs on 8TeV collision data</doc>
	<jobTransformJobName>RecoTrf_8TeV_data_long_stdcmalloc</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputBSFile=/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents=500 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.root --outputHISTFile=myHist.root --athenaopts='--stdcmalloc'  --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>long</queue>
      </jobTransform>
      
      
      
      <jobTransform userJobId="data12_8TeV_detailprintout">
	<doc>Reco_tf runs on 8TeV collision data</doc>
	<jobTransformJobName>RecoTrf_8TeV_data_detailprintout</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputBSFile=/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents=300 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.root --outputHISTFile=myHist.root --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>long</queue>
      </jobTransform>
      

      
      
      
      <jobTransform userJobId="mc12_long_tcmalloc">
	<doc>Reco_tf runs on mc12</doc>
	<jobTransformJobName>RecoTrf_mc12_long_tcmalloc</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile=root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1 --maxEvents=500 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.root --outputHISTFile=myHist.root  --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>long</queue>
      </jobTransform>
      
      

      <jobTransform userJobId="mc12_long_stdcmalloc">
	<doc>Reco_tf runs on mc12</doc>
	<jobTransformJobName>RecoTrf_mc12_long_stdcmalloc</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile=root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1 --maxEvents=500 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.root --outputHISTFile=myHist.root --athenaopts='--stdcmalloc'  --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>long</queue>
      </jobTransform>
      
      <jobTransform userJobId="mc12_detailprintout">
	<doc>Reco_tf runs on mc12</doc>
	<jobTransformJobName>RecoTrf_mc12_detailprintout</jobTransformJobName>
	<jobTransformCmd>
	  Reco_tf.py --inputRDOFile=root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1 --maxEvents=500 --autoConfiguration=everything --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.root --outputHISTFile=myHist.root --preExec='from PerfMonComps.PerfMonFlags import jobproperties as pmjp;pmjp.PerfMonFlags.doMallocMonitoring=True;pmjp.PerfMonFlags.doPostProcessing=True;pmjp.PerfMonFlags.doSemiDetailedMonitoringFullPrint=True;pmjp.PerfMonFlags.doExtraPrintouts=True'
	</jobTransformCmd>
	<group>TrfRecPerf_CheckFile_PerfMon</group>
	<queue>long</queue>
      </jobTransform>
    </jobList>
    
    <jobGroups>

      <jobGroup name="TrfRecPerf" parent="Transform">
	<!-- keep everything which is not huge -->
        <keepFilePattern>*.pmon.gz</keepFilePattern>
        <keepFilePattern>*.log</keepFilePattern>
        <keepFilePattern>*.xml</keepFilePattern>
        <keepFilePattern>*.py</keepFilePattern>
        <keepFilePattern>*.pdf</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.png</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.ascii</keepFilePattern>
        <keepFilePattern>last*</keepFilePattern>
        <keepFilePattern>*pickle</keepFilePattern>
        <keepFilePattern>jobReport*</keepFilePattern>
        <keepFilePattern>runargs*</keepFilePattern>
        <keepFilePattern>ntuple*perfmon*</keepFilePattern>
        <keepFilePattern>pmb-callgrind*log</keepFilePattern>
        <keepFilePattern>callgrind*bz2</keepFilePattern>

      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_PerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
        </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_NoCheckFile_NoPerfMon" parent="TrfRecPerf">
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple_RAW*.pmon.gz</argvalue>
          </arg>
        </test>

        <testToRemove>
          <jobGroupName>Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
          </testToRemove>
      </jobGroup>


      <jobGroup name="TrfRecPerf_CheckFile_PerfMon" parent="TrfRecPerf">
	<keepFilePattern>*.root</keepFilePattern>
	<keepFilePattern>*.pmon.gz</keepFilePattern>
	<keepFilePattern>*.log</keepFilePattern>
        <!--test>
          <modulename>RttLibraryTools</modulename>
          <testname>PerfMonRunner</testname>
          <arg>
            <argname>fileName</argname>
            <argvalue>ntuple*perfmon.gz</argvalue>
          </arg>
        </test-->

      </jobGroup>

    </jobGroups>

  </rtt>
</unifiedTestConfiguration>
