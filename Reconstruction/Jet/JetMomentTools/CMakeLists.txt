# $Id: CMakeLists.txt 784099 2016-11-14 17:18:18Z khoo $
################################################################################
# Package: JetMomentTools
################################################################################

# Declare the package name:
atlas_subdir( JetMomentTools )

# Declare the package's dependencies:
if( XAOD_STANDALONE OR XAOD_ANALYSIS )
   set( extra_deps )
   if( NOT XAOD_STANDALONE )
      set( extra_deps GaudiKernel )
   endif()
   atlas_depends_on_subdirs(
      PUBLIC
      Control/AthToolSupport/AsgTools
      Event/xAOD/xAODCaloEvent
      Event/xAOD/xAODJet
      Event/xAOD/xAODMissingET
      Event/xAOD/xAODTracking
      Reconstruction/Jet/JetEDM
      Reconstruction/Jet/JetInterface
      Reconstruction/Jet/JetRec
      Reconstruction/Jet/JetUtils
      Reconstruction/Jet/JetCalibTools
      Reconstruction/PFlow/PFlowUtils
      PRIVATE
      Calorimeter/CaloGeoHelpers
      Event/xAOD/xAODEventInfo
      Event/xAOD/xAODPFlow
      Tools/PathResolver
      Control/AthToolSupport/AsgTools
      Control/xAODRootAccess
      Event/xAOD/xAODMetaData
      ${extra_deps} )
else()
   atlas_depends_on_subdirs(
      PUBLIC
      Calorimeter/CaloIdentifier
      Control/AthToolSupport/AsgTools
      Event/xAOD/xAODCaloEvent
      Event/xAOD/xAODJet
      Event/xAOD/xAODMissingET
      Event/xAOD/xAODTracking
      Reconstruction/Jet/JetEDM
      Reconstruction/Jet/JetInterface
      Reconstruction/Jet/JetRec
      Reconstruction/Jet/JetCalibTools
      Reconstruction/Jet/JetRecCalo
      Reconstruction/PFlow/PFlowUtils
      Reconstruction/Jet/JetUtils
      PRIVATE
      Calorimeter/CaloDetDescr
      Calorimeter/CaloEvent
      Calorimeter/CaloGeoHelpers
      Control/AthenaKernel
      Event/xAOD/xAODEventInfo
      Event/xAOD/xAODPFlow
      Tools/PathResolver
      Event/xAOD/xAODMetaData
      GaudiKernel )
endif()

# External dependencies:
find_package( Boost )
find_package( ROOT COMPONENTS Core Hist RIO TMVA)

# Component(s) in the package:
atlas_add_library( JetMomentToolsLib
   JetMomentTools/*.h Root/*.cxx
   PUBLIC_HEADERS JetMomentTools
   PRIVATE_INCLUDE_DIRS ${ROOT_INCLUDE_DIRS} ${Boost_INCLUDE_DIRS}
   LINK_LIBRARIES ${ROOT_LIBRARIES} ${Boost_LIBRARIES}
   AsgTools xAODCaloEvent xAODJet xAODMissingET xAODTracking JetEDM JetInterface
   JetRecLib JetUtils PFlowUtilsLib JetCalibToolsLib
   xAODMetaData
   PRIVATE_LINK_LIBRARIES CaloGeoHelpers xAODEventInfo xAODPFlow PathResolver )

if( NOT XAOD_STANDALONE )
   set( extra_libs )
   if( NOT XAOD_ANALYSIS )
      set( extra_libs JetRecCaloLib CaloDetDescrLib CaloEvent AthenaKernel CaloIdentifier )
   endif()
   atlas_add_component( JetMomentTools
      src/*.h src/*.cxx src/components/*.cxx
      INCLUDE_DIRS ${ROOT_INCLUDE_DIRS}
      LINK_LIBRARIES ${ROOT_LIBRARIES} xAODCaloEvent xAODJet xAODMetaData
      GaudiKernel JetRecLib JetUtils PathResolver JetMomentToolsLib PFlowUtilsLib JetCalibToolsLib
      ${extra_libs} )
endif()

atlas_add_dictionary( JetMomentToolsDict
	JetMomentTools/JetMomentToolsDict.h
	JetMomentTools/selection.xml
	LINK_LIBRARIES JetMomentToolsLib )

if( XAOD_ANALYSIS )
    atlas_add_executable( JetJvtTools_Example
			  util/JetJvtTools_Example.cxx
	 		  INCLUDE_DIRS ${ROOT_INCLUDE_DIRS}
			  LINK_LIBRARIES ${ROOT_LIBRARIES}
			  AsgTools xAODJet JetMomentToolsLib
			  xAODRootAccess xAODCore xAODMetaData
			  )
endif()

# Install files from the package:
atlas_install_python_modules( python/*.py )
atlas_install_runtime( share/*.root )
atlas_install_data( share/* )
