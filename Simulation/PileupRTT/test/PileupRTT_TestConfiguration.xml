<?xml version="1.0"?>
   <!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

   <unifiedTestConfiguration>
      <atn/>
      <kv/>
      <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt" >
         <rttContactPerson>Malcolm Skinner (malcolm.bruce.skinner@cern.ch)</rttContactPerson>
         <mailto>atlas-simulation-testreports@cern.ch</mailto>
         <refRelease>12.0.6</refRelease>

         <jobList>
            <classification>
               <displayClass>OfflineValidation</displayClass>
               <displayProcess>Digi</displayProcess>
               <displayComponent>Phys-StandardModel</displayComponent>
            </classification>
            <chain>
               <chainName>PileUp_0</chainName>
               <sequential>
                  <chainElement>
                     <athena userJobId="PileUp_0_Digi">
                        <doc>Run full digitization on ttbar events: zero lumi</doc>
                        <options>PileupDigitization_zero.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiTest</group>
                        <queue>long</queue>
                        <dataset>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108118.Pythia8_minbias_Inelastic_low.merge.HITS.e816_s1354_s1360/HITS.580376._000962.pool.root.1</dataset>
                     </athena>
                     <chainfileout>PileupDigiRTTOutput.RDO.pool.root</chainfileout>
                  </chainElement>
                  <chainElement>
                     <athena userJobId="PileUp_0_Valid">
                        <doc>Run full digitization on ttbar events: zero lumi</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>PileupDigiRTTOutput.RDO.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
               </sequential>
            </chain>

            <chain>
               <chainName>PileUp_5</chainName>
               <sequential>
                  <chainElement>
                     <jobTransform userJobId="PileUp_5_Digi">
                     <jobTransformJobName>PileUp_5_Digi</jobTransformJobName>
                     <jobTransformCmd>DigiMReco_trf.py inputHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11a/mc11_7TeV.105200.T1_McAtNlo_Jimmy.merge.HITS.e835_s1310_s1300/HITS.508808._000857.pool.root.1 outputAODFile=PileupDigiRTTOutput.AOD.pool.root outputTAGFile=TAG.728127._000036.pool.root.1 maxEvents=50 triggerConfigByRun="{189751:\"MCRECO:Physics_pp_v5\"}" preInclude_h2r=Digitization/ForceUseOfPileUpTools.py,SimulationJobOptions/preInclude.PileUpBunchTrains2011Config8_DigitConfig.py,RunDependentSimData/configLumi_run189751.py preExec_h2r="from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=[\"SimLayout\",\"PhysicsList\"]" postExec_h2r="ToolSvc.LArAutoCorrTotalToolDefault.NMinBias=0" preExec_r2e="rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50);from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from CaloTools.CaloNoiseFlags import jobproperties;jobproperties.CaloNoiseFlags.FixedLuminosity.set_Value_and_Lock(1.45);InDetFlags.writeRDOs.set_Value_and_Lock(True)" preExec_e2a="TriggerFlags.AODEDMSet=\"AODSLIM\";rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50);InDetFlags.writeRDOs.set_Value_and_Lock(True)" RunNumber=105013 autoConfiguration=everything conditionsTag=OFLCOND-SDR-BS7T-05-24 outputRDOFile=PileupDigiRTTOutput.RDO.pool.root geometryVersion=ATLAS-GEO-18-01-01 numberOfLowPtMinBias=4.994333 numberOfHighPtMinBias=0.005667 'LowPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108118.Pythia8_minbias_Inelastic_low.merge.HITS.e816_s1354_s1360/HITS.580376._[000431,001224,001354].pool.root.1' DataRunNumber=-1 jobNumber=36 digiSeedOffset1=36 digiSeedOffset2=36 'HighPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108119.Pythia8_minbias_Inelastic_high.merge.HITS.e848_s1354_s1360/HITS.580377._[004008,004706,006612].pool.root.1'</jobTransformCmd>
                     <group>PileupRTT_JobTransforms</group>
                     <queue>long</queue> <!-- this might need to be the long queue -->
                     </jobTransform>
                     <chainfileout>PileupDigiRTTOutput.RDO.pool.root</chainfileout>
                     <chainfileout>tmp.ESD.pool.root</chainfileout>
                     <chainfileout>PileupDigiRTTOutput.AOD.pool.root</chainfileout>
                  </chainElement>
                  <chainElement>
                     <athena userJobId="PileUp_5_Valid_RDO">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>PileupDigiRTTOutput.RDO.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
                 <chainElement>
                     <athena userJobId="PileUp_5_Valid_ESD">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>tmp.ESD.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
<!-- PileUp_5_Valid_AOD is broken unless we can find a way of getting the RDOs into the AOD -->
<!--                 <chainElement>
                     <athena userJobId="PileUp_5_Valid_AOD">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions_AOD.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>PileupDigiRTTOutput.AOD.pool.root</chaindatasetName>
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement> -->
               </sequential>
            </chain>

            <chain>
               <chainName>PileUp_10</chainName>
               <sequential>
                  <chainElement>
                     <jobTransform userJobId="PileUp_10_Digi">
                     <jobTransformJobName>PileUp_10_Digi</jobTransformJobName>
                     <jobTransformCmd>DigiMReco_trf.py inputHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11a/mc11_7TeV.105200.T1_McAtNlo_Jimmy.merge.HITS.e835_s1310_s1300/HITS.508808._000857.pool.root.1 outputAODFile=PileupDigiRTTOutput.AOD.pool.root outputTAGFile=TAG.728127._000036.pool.root.1 maxEvents=50 triggerConfigByRun="{189751:\"MCRECO:Physics_pp_v5\"}" preInclude_h2r=Digitization/ForceUseOfPileUpTools.py,SimulationJobOptions/preInclude.PileUpBunchTrains2011Config8_DigitConfig.py,RunDependentSimData/configLumi_run189751.py preExec_h2r="from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=[\"SimLayout\",\"PhysicsList\"]" postExec_h2r="ToolSvc.LArAutoCorrTotalToolDefault.NMinBias=0" preExec_r2e="rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50);from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from CaloTools.CaloNoiseFlags import jobproperties;jobproperties.CaloNoiseFlags.FixedLuminosity.set_Value_and_Lock(1.45);InDetFlags.writeRDOs.set_Value_and_Lock(True)" preExec_e2a="TriggerFlags.AODEDMSet=\"AODSLIM\";rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50)" RunNumber=105013 autoConfiguration=everything conditionsTag=OFLCOND-SDR-BS7T-05-24 outputRDOFile=PileupDigiRTTOutput.RDO.pool.root geometryVersion=ATLAS-GEO-18-01-01 numberOfLowPtMinBias=9.988666 numberOfHighPtMinBias=0.011334 'LowPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108118.Pythia8_minbias_Inelastic_low.merge.HITS.e816_s1354_s1360/HITS.580376._[000431,001224,001354].pool.root.1' DataRunNumber=-1 jobNumber=36 digiSeedOffset1=36 digiSeedOffset2=36 'HighPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108119.Pythia8_minbias_Inelastic_high.merge.HITS.e848_s1354_s1360/HITS.580377._[004008,004706,006612].pool.root.1'</jobTransformCmd>
                     <group>PileupRTT_JobTransforms</group>
                     <queue>long</queue> <!-- this might need to be the long queue -->
                     </jobTransform>
                     <chainfileout>PileupDigiRTTOutput.RDO.pool.root</chainfileout>        
                     <chainfileout>tmp.ESD.pool.root</chainfileout>
                  </chainElement>
                  <chainElement>
                     <athena userJobId="PileUp_10_Valid_RDO">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>PileupDigiRTTOutput.RDO.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
                 <chainElement>
                     <athena userJobId="PileUp_10_Valid_ESD">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>tmp.ESD.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
               </sequential>
            </chain>

            <chain>
               <chainName>PileUp_20</chainName>
               <sequential>
                  <chainElement>
                     <jobTransform userJobId="PileUp_20_Digi">
                     <jobTransformJobName>PileUp_20_Digi</jobTransformJobName>
                     <jobTransformCmd>DigiMReco_trf.py inputHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11a/mc11_7TeV.105200.T1_McAtNlo_Jimmy.merge.HITS.e835_s1310_s1300/HITS.508808._000857.pool.root.1 outputAODFile=PileupDigiRTTOutput.AOD.pool.root outputTAGFile=TAG.728127._000036.pool.root.1 maxEvents=50 triggerConfigByRun="{189751:\"MCRECO:Physics_pp_v5\"}" preInclude_h2r=Digitization/ForceUseOfPileUpTools.py,SimulationJobOptions/preInclude.PileUpBunchTrains2011Config8_DigitConfig.py,RunDependentSimData/configLumi_run189751.py preExec_h2r="from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=[\"SimLayout\",\"PhysicsList\"]" postExec_h2r="ToolSvc.LArAutoCorrTotalToolDefault.NMinBias=0" preExec_r2e="rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50);from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from CaloTools.CaloNoiseFlags import jobproperties;jobproperties.CaloNoiseFlags.FixedLuminosity.set_Value_and_Lock(1.45);InDetFlags.writeRDOs.set_Value_and_Lock(True)" preExec_e2a="TriggerFlags.AODEDMSet=\"AODSLIM\";rec.Commissioning.set_Value_and_Lock(True);jobproperties.Beam.energy.set_Value_and_Lock(3500*Units.GeV);muonRecFlags.writeSDOs=True;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);jobproperties.Beam.bunchSpacing.set_Value_and_Lock(50)" RunNumber=105013 autoConfiguration=everything conditionsTag=OFLCOND-SDR-BS7T-05-24 outputRDOFile=PileupDigiRTTOutput.RDO.pool.root geometryVersion=ATLAS-GEO-18-01-01 numberOfLowPtMinBias=19.977333 numberOfHighPtMinBias=0.022667 'LowPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108118.Pythia8_minbias_Inelastic_low.merge.HITS.e816_s1354_s1360/HITS.580376._[000431,001224,001354].pool.root.1' DataRunNumber=-1 jobNumber=36 digiSeedOffset1=36 digiSeedOffset2=36 'HighPtMinbiasHitsFile=root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/mc11b/mc11_7TeV.108119.Pythia8_minbias_Inelastic_high.merge.HITS.e848_s1354_s1360/HITS.580377._[004008,004706,006612].pool.root.1'</jobTransformCmd>
                     <group>PileupRTT_JobTransforms</group>
                     <queue>long</queue> <!-- this might need to be the long queue -->
                     </jobTransform>
                     <chainfileout>PileupDigiRTTOutput.RDO.pool.root</chainfileout>
                     <chainfileout>tmp.ESD.pool.root</chainfileout>
                  </chainElement>
                  <chainElement>
                     <athena userJobId="PileUp_20_Valid_RDO">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>PileupDigiRTTOutput.RDO.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
                 <chainElement>
                     <athena userJobId="PileUp_20_Valid_ESD">
                        <doc>Run full digitization on ttbar events: very low lumi (0.23 MB)</doc>
                        <options>PileupMCEventCollectionChecker_topOptions.py</options>
                        <package>Simulation/PileupRTT</package>
                        <group>PileupDigiValid</group>
                        <queue>long</queue>
                        <chaindataset_info>
                           <dc2 />
                           <chaindatasetName>tmp.ESD.pool.root</chaindatasetName>
                           <!-- If the file on the previous line is not in the chain store, then use the following fallback file. -->
                           <dataset_info>
                              <dc2 />
                              <datasetName>/eos/atlas/atlascerngroupdisk/proj-sit/digitization/RTT/fallback/zero/PileupDigiRTTOutput.RDO.pool.root</datasetName>
                           </dataset_info>
                        </chaindataset_info>
                     </athena>
                 </chainElement>
               </sequential>
            </chain>

        </jobList>

         <jobGroups>
             
             <jobGroup name="AthenaPileupDigiTest" parent="Athena">
             
                 <keepFilePattern>*.txt</keepFilePattern>
                 <keepFilePattern>*.log</keepFilePattern>
                 <keepFilePattern>*.ps</keepFilePattern>
                 <keepFilePattern>*.root</keepFilePattern>
                 <keepFilePattern>*.hist</keepFilePattern>
                 <keepFilePattern>*.eps</keepFilePattern>
                 <keepFilePattern>*.gif</keepFilePattern>
                 <keepFilePattern>*.html</keepFilePattern>
                 <keepFilePattern>*.png</keepFilePattern>
                 <keepFilePattern>*.C</keepFilePattern>
                 <keepFilePattern>*.checkFile</keepFilePattern>
                 <keepFilePattern>*perfmon*</keepFilePattern>
                 <keepFilePattern>*.gz</keepFilePattern>
                 <keepFilePattern>*.py</keepFilePattern> 

                 <testToRemove>
                   <jobGroupName>Top</jobGroupName>
                   <testidentifier>CheckFileRunner0</testidentifier>
                 </testToRemove>

             </jobGroup>

             <jobGroup name="AthenaPileupDigiValid" parent="Athena">
             
                 <keepFilePattern>*.txt</keepFilePattern>
                 <keepFilePattern>*.log</keepFilePattern>
                 <keepFilePattern>*.ps</keepFilePattern>
                 <keepFilePattern>*.root</keepFilePattern>
                 <keepFilePattern>*.hist</keepFilePattern>
                 <keepFilePattern>*.eps</keepFilePattern>
                 <keepFilePattern>*.gif</keepFilePattern>
                 <keepFilePattern>*.html</keepFilePattern>
                 <keepFilePattern>*.png</keepFilePattern>
                 <keepFilePattern>*.C</keepFilePattern>
                 <keepFilePattern>*.checkFile</keepFilePattern>
                 <keepFilePattern>*perfmon*</keepFilePattern>
                 <keepFilePattern>*.gz</keepFilePattern>
                 <keepFilePattern>*.py</keepFilePattern> 
                 <auxFilePattern>PileupDigiRTT_refPlots.C</auxFilePattern>
                 <auxFilePattern>*.html</auxFilePattern>
                 <auxFilePattern>*.checkFile</auxFilePattern>

                 <test>
                  <modulename>RttLibraryTools</modulename>
                  <testname>ROOTMacroRunner</testname>
                  <arg>
                    <argname>macro</argname>
                    <argvalue>PileupDigiRTT_refPlots.C</argvalue>
                  </arg>
                 </test>

                 <testToRemove>
                   <jobGroupName>Top</jobGroupName>
                   <testidentifier>CheckFileRunner0</testidentifier>
                 </testToRemove>

             </jobGroup>

             <jobGroup name="PileupRTT_JobTransforms" parent="Transform">
                 <keepFilePattern>*.txt</keepFilePattern>
                 <keepFilePattern>*.log</keepFilePattern>
                 <keepFilePattern>*.ps</keepFilePattern>
                 <keepFilePattern>*.root</keepFilePattern>
                 <keepFilePattern>*.hist</keepFilePattern>
                 <keepFilePattern>*.eps</keepFilePattern>
                 <keepFilePattern>*.gif</keepFilePattern>
                 <keepFilePattern>*.html</keepFilePattern>
                 <keepFilePattern>*.png</keepFilePattern>
                 <keepFilePattern>*.C</keepFilePattern>
                 <keepFilePattern>*.checkFile</keepFilePattern>
                 <keepFilePattern>*perfmon*</keepFilePattern>
                 <keepFilePattern>*.gz</keepFilePattern>
                 <keepFilePattern>*.py</keepFilePattern>

                 <testToRemove>
                   <jobGroupName>Top</jobGroupName>
                   <testidentifier>CheckFileRunner0</testidentifier>
                 </testToRemove>

             </jobGroup>

         </jobGroups>

      </rtt>
   </unifiedTestConfiguration>
