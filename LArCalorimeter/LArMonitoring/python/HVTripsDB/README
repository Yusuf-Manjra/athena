Instructions for the LAr HV expert on how to update the HV shift DB
===================================================================

At 7:45 every morning, a cron job is run that executes updateDB.py
This adds information of new HV trips from the past 24 hours (until 
7:30am, to allow for a 15-minute delay in writing the values to COOL) 
to the bottom of trips.dat. The previous list is in trips.dat.bak.
More information is stored in the subfolder dailyFiles, including the log
file called dailyCheck.log

1. Make sure the new HV trips added to trips.dat are correct
Instructions on how the information should be added are in

  tripTypes_improved.pdf

in this folder.

NOTE that 
  "Recovered" means "back to its nominal state"
and
  "stable V" means "stable at non-nominal value"
The script currently (July 29, 2011) might report "Stable V" as "Recovered"
in certain cases. 


Useful to check what are the new entries:
  diff trips.dat trips.dat.bak

(should be the same as cat dailyFiles/HVTrips_<date>.dat)


2. Reproduce the actual DB

Once the trips.dat is all correct simply run:

  ./recreateDB.py 

The updated DB can be seen immediately at:

https://atlas-larmon.cern.ch/HVTripsDB/

Please be careful! ATLAS data quality & LAr HV experts are depending on you!

3. If needed (for complicated situations), make use of the standalone script:

source ~/public/scripts/LADIeS/setup17.sh
./CheckHVStatus.py 152002 2012-05-03:22:00:00

(the first argument is the HV line, and the second is the approximate timestamp)
This outputs the voltage/current/status evolution (and corresponding LBs) for a given line.

PS: (Added by Nikiforos)

Please keep this directory clean! Any backup "trips.dat" and/or 
"trips.db" in the "dbbackups" directory. Delete any temporary files you 
create or move them in "retired" if you are not sure.
