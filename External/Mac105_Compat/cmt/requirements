package Mac105_Compat

# This package provides mac105 (Leopard) compatibility when running on mac106 (Snow Leopard) machines

author David Quarrie <David.Quarrie@cern.ch>

use AtlasExternalArea AtlasExternalArea-* External
use PlatformPolicy    PlatformPolicy-*    External

include_path none

macro Mac105_Compat_native_version 1.0.0

macro Mac105_Compat_platform      "NotSupported" \
      i386-mac105-gcc40-dbg       "i386-mac105-gcc40" \
      i386-mac105-gcc40-opt       "i386-mac105-gcc40"

macro Mac105_Compat_base          "$(ATLAS_EXTERNAL)/mac105compat/$(Mac105_Compat_native_version)"
macro Mac105_Compat_home          "$(Mac105_Compat_base)/$(Mac105_Compat_platform)"

macro Mac105_Compat_home_install  "$(Mac105_Compat_root)/$(CMTCONFIG)"

macro Mac105_Compat_bin           "" \
      host-mac106&target-mac105   "$(Mac105_Compat_home_install)/bin"

macro Mac105_Compat_lib             "" \
      host-mac106&target-mac105   "$(Mac105_Compat_home_install)/lib"

path_remove  PATH                 "/mac105compat/"
path_prepend PATH                 "" \
      host-mac106&target-mac105   "$(Mac105_Compat_bin)" 

path_remove  LD_LIBRARY_PATH      "/mac105compat/"
path_prepend LD_LIBRARY_PATH      "" \
      host-mac106&target-mac105   "$(Mac105_Compat_lib)" 

path_remove  DYLD_LIBRARY_PATH    "/mac105compat/"
path_prepend DYLD_LIBRARY_PATH    "" \
      host-mac106&target-mac105   "$(Mac105_Compat_lib)" 

macro Mac105_Compat_export_paths  "" \
      i386-mac105-gcc40-dbg       "$(Mac105_Compat_home)" \
      i386-mac105-gcc40-opt       "$(Mac105_Compat_home)"

macro Mac105_Compat_install_cmd     "$(library_install_command) $(Mac105_Compat_home) $(Mac105_Compat_home_install)"
action Mac105_Compat_install_action "" \
      i386-mac105-gcc40-dbg       "$(Mac105_Compat_install_cmd)" \
      i386-mac105-gcc40-opt       "$(Mac105_Compat_install_cmd)"

private
macro_append all_dependencies     "" \
      i386-mac105-gcc40-dbg       " Mac105_Compat_install_action" \
      i386-mac105-gcc40-opt       " Mac105_Compat_install_action"
end_private
