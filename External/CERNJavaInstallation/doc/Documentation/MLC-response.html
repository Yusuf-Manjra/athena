<title>ATLAS CSG Response to MLC recommendations Jan 2002 </title>
<body TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#800080" 
ALINK="#A900FF">
<h2>
Response of ATLAS CSG to the recommendations of the Multi-Language Commission.
 January 2002</h2> 
<hr>


<h2>Introduction:</h2>
<p>In December 2000 the Multi-Language Commission (MLC) was set up by the Computing 
    Co-ordinator, in consultation with the CSG, with a membership of 
    Julius Hrivnac (Orsay), David Quarrie (LBNL), and Marc Virchaux (Saclay). 
    The MLC presented its final report at the end of September; the report was made 
    public within ATLAS and comment invited. The issue was discussed at the CSG meetings
    of 26 October and 7 December 2001. This document summarises the decisions that 
    arise from that meeting and some subsequent e-mail discussion. 

<p> It is worth noting at the outset that, in common with all the LHC experiments,
    ATLAS already deploys several languages (including C++, JAVA, Fortran, IDL, and 
    Python) across the full range of its software: the focus of the MLC was on the 
    the languages to be used for 'algorithmic' code ( for simulation, reconstruction, and 
    analysis) and the associated 'core' software, and what the ATLAS policy should be 
    with regard to the use of the various languages in these areas.
  

<h2>MLC Recommendations and CSG decisions:</h2>
<p>The MLC report 
(<a HREF="http://atlas.web.cern.ch/Atlas/GROUPS/SOFTWARE/OO/architecture/General/MLC-Recommendation.txt">

http://atlas.web.cern.ch/Atlas/GROUPS/SOFTWARE/OO/architecture/General/MLC-Recommendation.txt</a>)
consists essentially of four recommendations:
<ul>
<li> MLC.1) "The ATLAS experiment should unambiguously support a 'restricted'
            multi-language policy for its software.   By that we mean that,
            at the moment (see footnote a), we suggest three languages, i.e.
            C++, Java and Fortran90/95, and only those three, to be officially
            accepted as development languages inside well encapsulated modules.
            For this to work, one will have to enforce a genuine modularity which
            is in any case highly desirable."
<li> MLC.2) "For the general framework (now in C++) that has the essential task of
            defining the interfaces between modules (see footnote b), we
            recommend a move to Java.  We are aware of the very important
            implications of this recommendation but see it as highly desirable
            for the future. We recommend that work should begin as soon as
            possible so as not to jeopardise this move."
<li> MLC.3) "In view of the present situation, we recommend that this framework
            support C++ interfaces on top of the Java ones.  F90 modules (mainly
            algorithmic ones) should also be supported but the framework itself
            will not provide direct F90 interfaces. The responsibility for
            providing adapters from the native framework Java (or C++) interfaces
            to F90 should be on the F90 developers themselves. However, everything
            should be done to keep these interfaces as simple as possible and to
            avoid them to use too language dependent features.  In particular, all
            'public' objects, i.e. the objects being exchanged between modules,
            should be uniquely identifiable using (as much as possible) language
            independent identifiers."
<li> MLC.4) "For the present modules in F77 or Age, we recommend them to be
            progressively replaced by new modules in one of the three
            above-mentioned languages or, at least, to be adapted to the F90
            compilers."
</ul>

<p>   The CSG is grateful to the MLC for these carefully-considered recommendations.
   The CSG recognises the growing use of JAVA and agrees that it is, in important
   respects, a simpler language than C++. On MLC.2, the CSG is not, however, 
   ready to endorse the immediate launch of a significant effort to re-write the 
   framework in JAVA. It is already policy that the framework should be developed
   with a watchful eye on a possible change to JAVA in the future, but the CSG
   feels that the present state of ATLAS software, combined with the imperative 
   of testing that software through the first round of Data Challenges (DC0,1,2),
   means that the earliest such a change could be deployed is after DC2 (end 2003). 

<p>   Development work could of course begin earlier, but this would require careful
   planning of the effort required, and of course the availability of such effort.    
   As with other 'strategic' computing choices for the LHC, such a move would
   also require consideration of the strategy and intentions of the other LHC 
   experiments and plans for major software components (e.g. Geant4).
   In short, the CSG's decision on MLC.2 is to keep the situation under review, 
   noting that a JAVA version of the framework is not feasible until after DC2 at 
   the earliest.


<p>    Turning to MLC.1, the CSG accepts the idea of a "restricted"
  multi-language policy in the sense that, although the framework language
   as well as the recommended development language must remain C++ (at
  least for the foreseeable future), well-encapsulated modules written in
  Java or F90/95 can be accepted as long as they are provided with proper
  C++ interfaces to the framework.  In the spirit of MLC.3, the
  responsibility of the development, writing and maintenance of these
  interfaces lies with the Java or F90/95 developers themselves. The only
  additional responsibility on the framework developers should be to
   ensure the availability of Java and F90/95 support in the software
   management tools and to make sure that the general C++ interfaces of the
  framework are kept as simple as possible, avoiding language-dependent  
  features as far as possible. They should also push the idea of a genuine
   modularity of the code as far as possible.

  <p>As is the case for any major new piece of code which is to be included
into the general Atlas software, the CSG would like to be informed at an
early stage of the project, and to be assured of the long-term
maintenance of the code.  This procedure applies independent of the
choice of language.  (Issues such as compatibility with the general
framework, code quality, memory usage and speed, will be checked by the
broader ATLAS Physics and Computing community, including the software QA
group.)


<p>    On MLC.4, the CSG notes that a certain amount of F77 code will have
to be handled probably for some considerable time.  The CSG does not
wish at this time to commit to a re-write of this code.  However, as the
F90/95 language is compatible with F77, replacing F77 compilers by
F90/95 ones should require a minimal amount of work and would eventually
be desirable, and may even become necessary.


     
