<project name="Default" 
         default="compile" 
         basedir="..">
         
  <description>
    Default Cmt Ant build file
    </description>
    
  <!-- Setup ================================================================-->  
    
  <property environment="env"/>
  <property name="env.ANT_SITE" value="dist"/>
  <property file="ant/config-${env.ANT_SITE}.properties"/>
  <property name="version" value="0.0.0"/>  

  <path id="classpath.build">
    <pathelement path="${CLASSPATH}"/>
    <fileset dir="${lib}">
      <include name="*.jar"/>
      <exclude name="${name}*.jar"/>
      </fileset>
    </path>
 
  <path id="classpath.run">
    <pathelement path="${src}"/>
    <pathelement path="${build}"/>
    <path refid="classpath.build"/>
    </path>

  <!-- Init =================================================================-->  

  <target name="init">
    <tstamp>
      <format property="TSTAMP" pattern="dd/MMM/yyyy 'at' kk:mm:ss z"/>
      </tstamp>
    <tstamp/>
    <ant antfile="${config.db}/standard.xml" target="standard.init" inheritRefs="true"/>
    </target>

  <!-- Copy =================================================================-->  

  <target name="copy" if="local">
    <copy todir="${lib}">
      </copy>
    </target>

  <!-- Compile ==============================================================-->  

  <target name="compile" 
          depends="init"
          description="Compile sources">
    <ant antfile="${config.db}/standard.xml" target="standard.compile" inheritRefs="true"/>
    </target>

  <!-- JAR ==============================================================-->  

  <target name="jar" 
          depends="compile"
          description="Create JAR">
    <ant antfile="${config.db}/standard.xml" target="standard.jar" inheritRefs="true">
      <property name="jar.name" value=""/>
      <property name="scope"    value=""/>
      <property name="main"     value=""/>
      </ant>
    </target>

  <!-- Distribution =========================================================-->  

  <target name="dist" 
          depends="copy,doc,jar"
          description="Create complete distribution">
    <ant antfile="${config.db}/standard.xml" target="standard.dist" inheritRefs="true"/>
    </target>

  <!-- Check ================================================================-->  

  <target name="check"
          depends="init"
          description="Test">
    </target>

  <!-- Clean ================================================================-->  

  <target name="clean"
          description="Clean up">
    <ant antfile="${config.db}/standard.xml" target="standard.clean" inheritRefs="true"/>
    </target>

  <!-- Deploy ===============================================================-->  

  <target name="post"
          depends="dist"
          description="Put on WWW"
          if="local">
    <ant antfile="${config.db}/standard.xml" target="standard.deploy" inheritRefs="true"/>
    </target>

  <!-- JavaDoc ==============================================================-->  

  <target name="doc"
          depends="j2h"
          description="Construct documentation">
		<copy todir="${doc}">
			<fileset dir="${src}" includes="index.html"/>
      </copy>
    <javadoc 
             sourcepath="${src}"
             destdir="${doc}/JavaDoc"
             author="true"
             version="true"
             use="true"
             private="true"
             additionalparam=" -linksource -breakiterator -keywords"
             windowtitle="${name}">
      <packageset dir="${build}" defaultexcludes="yes" includes="**" />
      <packageset dir="${src}" defaultexcludes="yes" includes="**" />
      <doctitle><![CDATA[<u>]]>${name}<![CDATA[</u>]]></doctitle>
      <Header><![CDATA[<center>]]>${name} version: ${version}<![CDATA[</center>]]></Header>
      <Footer><![CDATA[<center>Written by: ${author}</center>]]></Footer>
      <bottom><![CDATA[Documentations]]> built ${TODAY} on ${os.name} by ${user.name}</bottom>
      <link href="http://java.sun.com/j2se/1.5.0/docs/api"/>
      <classpath>
        <path refid="classpath.run"/>
        </classpath>
      </javadoc>
    </target>

  <!-- J2H ==================================================================-->  

  <target name="j2h"
          description="Construct source documentation"
	        if="local">
    <ant antfile="${config.db}/standard.xml" target="standard.j2h" inheritRefs="true"/>
    </target>

  <!--=======================================================================-->  

  </project>
